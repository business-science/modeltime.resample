<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resampling Panel Time Series Data • modeltime.resample</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Resampling Panel Time Series Data">
<meta property="og:description" content="modeltime.resample">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-76139189-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76139189-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modeltime.resample</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getting-started.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Basics</li>
    <li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li class="dropdown-header">Panel Data</li>
    <li>
      <a href="../articles/panel-data.html">Resampling Panel Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Key Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/business-science/modeltime.resample">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="panel-data_files/header-attrs-2.4/header-attrs.js"></script><script src="panel-data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Resampling Panel Time Series Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/business-science/modeltime.resample/blob/master/vignettes/panel-data.Rmd"><code>vignettes/panel-data.Rmd</code></a></small>
      <div class="hidden name"><code>panel-data.Rmd</code></div>

    </div>

    
    
<p>Working with <strong>Panel Data</strong> is a common challenge for business analysts. We often have multiple time series (called Time Series Groups) that have overlapping timestamps. These time series may depend on each other and should be modeled together to take advantage of relationships between correlated time series.</p>
<blockquote>
<p><span style="color:blue"><strong>The challenge</strong> when working with Panel Data is judging how models will perform across time.</span> A single cross-section is not sufficient to instill confidence.</p>
</blockquote>
<p><strong>Modeltime Resample</strong> provides a convienent way for generating resample predictions across time for Panel Data, simplifying the model comparison process.</p>
<div id="panel-data-tutorial-overview" class="section level2">
<h2 class="hasAnchor">
<a href="#panel-data-tutorial-overview" class="anchor"></a>Panel Data Tutorial Overview</h2>
<p><strong>This is an advanced tutorial.</strong> Working with Panel Data requires working with multiple time series groups at the same time, and you need to be comfortable setting up the datasets required to generate training sets and forecast sets. I cover working with Panel Data and Time Series Groups in my <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/">High-Performance Time Series Course.</a></p>
</div>
<div id="libraries" class="section level2">
<h2 class="hasAnchor">
<a href="#libraries" class="anchor"></a>Libraries</h2>
<p>Load the following R packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/modeltime">modeltime</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/modeltime.resample">modeltime.resample</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/timetk">timetk</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></pre></div>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>We’ll use the <code>walmart_sales_weekly</code> dataset from <code>timetk</code>. This contains 7 time series groups.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">walmart_sales_weekly</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/plot_time_series.html">plot_time_series</a></span><span class="op">(</span><span class="va">Date</span>, <span class="va">Weekly_Sales</span>, .facet_ncol <span class="op">=</span> <span class="fl">3</span>, .interactive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></pre></div>
<p><img src="panel-data_files/figure-html/unnamed-chunk-2-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="data-preparation" class="section level2">
<h2 class="hasAnchor">
<a href="#data-preparation" class="anchor"></a>Data Preparation</h2>
<p>We’ll create 2 datasets that incorporate a grouping variable:</p>
<ul>
<li><p><strong>Training Data Set, <code>data_prepared_tbl</code>:</strong> Dataset that contains information on the training region for each time series group</p></li>
<li><p><strong>Forecast Data Set, <code>future_tbl</code>:</strong> Dataset that contains information on the forecast region for each time series group. We’ll extend each time series group by <code>"3 months"</code> based on the business forecast needs.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># Full = Training + Forecast Datasets</span>
<span class="va">full_data_tbl</span> <span class="op">&lt;-</span> <span class="va">walmart_sales_weekly</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">id</span>, <span class="va">Date</span>, <span class="va">Weekly_Sales</span><span class="op">)</span> <span class="op">%&gt;%</span>
  
  <span class="co"># Apply Group-wise Time Series Manipulations</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_split</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># Extend</span>
  <span class="fu">map</span><span class="op">(</span>.f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">df</span> <span class="op">%&gt;%</span> 
      <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/future_frame.html">future_frame</a></span><span class="op">(</span>.date_var   <span class="op">=</span> <span class="va">Date</span>, 
                   .length_out <span class="op">=</span> <span class="st">"3 months"</span>, 
                   .bind_data  <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> 
  <span class="op">}</span><span class="op">)</span> <span class="op">%&gt;%</span>
  
  <span class="co"># Recombine Time Series Groups</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">fill</span><span class="op">(</span><span class="va">id</span>, .direction <span class="op">=</span> <span class="st">"down"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">fct_drop</span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Training Data</span>
<span class="va">data_prepared_tbl</span> <span class="op">&lt;-</span> <span class="va">full_data_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Weekly_Sales</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Forecast Data</span>
<span class="va">future_tbl</span> <span class="op">&lt;-</span> <span class="va">full_data_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Weekly_Sales</span><span class="op">)</span><span class="op">)</span></pre></div>
</div>
<div id="modeling" class="section level2">
<h2 class="hasAnchor">
<a href="#modeling" class="anchor"></a>Modeling</h2>
<p>We’ll create:</p>
<ul>
<li><p><strong>1 Recipe:</strong> This applies engineered features from calendar variables</p></li>
<li><p><strong>3 Fitted Models:</strong> Prophet, XGBoost, and Prophet Boost fitted on the <code>data_prepared_tbl</code> dataset</p></li>
</ul>
<div id="recipe" class="section level3">
<h3 class="hasAnchor">
<a href="#recipe" class="anchor"></a>Recipe</h3>
<p>We’ll create a recipe that leverages <code><a href="https://rdrr.io/pkg/timetk/man/step_timeseries_signature.html">step_timeseries_signature()</a></code> to generate calendar features.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">recipe_spec</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">Weekly_Sales</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">data_prepared_tbl</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/step_timeseries_signature.html">step_timeseries_signature</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">step_rm</span><span class="op">(</span><span class="fu">matches</span><span class="op">(</span><span class="st">"(.iso$)|(.xts$)|(day)|(hour)|(minute)|(second)|(am.pm)"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">step_mutate</span><span class="op">(</span>Date_week <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">Date_week</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">step_dummy</span><span class="op">(</span><span class="fu">all_nominal</span><span class="op">(</span><span class="op">)</span>, one_hot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">recipe_spec</span></pre></div>
<pre><code>## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor          2
## 
## Operations:
## 
## Timeseries signature features from Date
## Delete terms 1 items
## Variable mutation for Date_week
## Dummy variables from all_nominal()</code></pre>
</div>
<div id="models" class="section level3">
<h3 class="hasAnchor">
<a href="#models" class="anchor"></a>Models</h3>
<p>Let’s generate 3 Models: Prophet, XGBoost, and Prophet Boost.</p>
<div id="prophet" class="section level4">
<h4 class="hasAnchor">
<a href="#prophet" class="anchor"></a>Prophet</h4>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">wflw_fit_prophet</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_model</span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/prophet_reg.html">prophet_reg</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">set_engine</span><span class="op">(</span><span class="st">"prophet"</span><span class="op">)</span> 
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">recipe_spec</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">fit</span><span class="op">(</span><span class="va">data_prepared_tbl</span><span class="op">)</span></pre></div>
</div>
<div id="xgboost" class="section level4">
<h4 class="hasAnchor">
<a href="#xgboost" class="anchor"></a>XGBoost</h4>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">wflw_fit_xgboost</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_model</span><span class="op">(</span>
    <span class="fu">boost_tree</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">set_engine</span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span> 
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">recipe_spec</span> <span class="op">%&gt;%</span> <span class="fu">step_rm</span><span class="op">(</span><span class="va">Date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">fit</span><span class="op">(</span><span class="va">data_prepared_tbl</span><span class="op">)</span></pre></div>
</div>
<div id="prophet-boost" class="section level4">
<h4 class="hasAnchor">
<a href="#prophet-boost" class="anchor"></a>Prophet Boost</h4>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">wflw_fit_prophet_boost</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_model</span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/prophet_boost.html">prophet_boost</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">set_engine</span><span class="op">(</span><span class="st">"prophet_xgboost"</span><span class="op">)</span> 
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">recipe_spec</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">fit</span><span class="op">(</span><span class="va">data_prepared_tbl</span><span class="op">)</span></pre></div>
</div>
</div>
<div id="organize-in-a-modeltime-table" class="section level3">
<h3 class="hasAnchor">
<a href="#organize-in-a-modeltime-table" class="anchor"></a>Organize in a Modeltime Table</h3>
<p>Add the 3 fitted models to a Modeltime Table with <code><a href="https://rdrr.io/pkg/modeltime/man/modeltime_table.html">modeltime_table()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="va">model_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_table.html">modeltime_table</a></span><span class="op">(</span>
  <span class="va">wflw_fit_prophet</span>,
  <span class="va">wflw_fit_xgboost</span>,
  <span class="va">wflw_fit_prophet_boost</span>
<span class="op">)</span>

<span class="va">model_tbl</span></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 3 x 3
##   .model_id .model     .model_desc              
##       &lt;int&gt; &lt;list&gt;     &lt;chr&gt;                    
## 1         1 &lt;workflow&gt; PROPHET W/ REGRESSORS    
## 2         2 &lt;workflow&gt; XGBOOST                  
## 3         3 &lt;workflow&gt; PROPHET W/ XGBOOST ERRORS</code></pre>
<p>We can visualize any of the time series groups.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">group_number</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="va">new_data</span>     <span class="op">&lt;-</span> <span class="va">future_tbl</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">[</span><span class="va">group_number</span><span class="op">]</span><span class="op">)</span>
<span class="va">actual_data</span>  <span class="op">&lt;-</span> <span class="va">data_prepared_tbl</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">[</span><span class="va">group_number</span><span class="op">]</span><span class="op">)</span>

<span class="va">model_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_forecast.html">modeltime_forecast</a></span><span class="op">(</span>
    new_data    <span class="op">=</span> <span class="va">new_data</span>,
    actual_data <span class="op">=</span> <span class="va">actual_data</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/plot_modeltime_forecast.html">plot_modeltime_forecast</a></span><span class="op">(</span>.interactive <span class="op">=</span> <span class="cn">FALSE</span>, .y_intercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></pre></div>
<p><img src="panel-data_files/figure-html/unnamed-chunk-9-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="resampling-panel-data" class="section level2">
<h2 class="hasAnchor">
<a href="#resampling-panel-data" class="anchor"></a>Resampling Panel Data</h2>
<p>Next, we need to determine how our models perform across time. To do so, we’ll evaluate using time series resamples. The first step is to make a resample strategy. Our business objective is to forecast 3 months so we’ll use the following strategy:</p>
<ul>
<li>assess: 3 months</li>
<li>initial: 18 months (this gets us more than a full-year of data)</li>
<li>skip: 3 months</li>
</ul>
<p>This generates 5 resample sets.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">walmart_tscv</span> <span class="op">&lt;-</span> <span class="va">data_prepared_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/timetk.html">time_series_cv</a></span><span class="op">(</span>
    date_var <span class="op">=</span> <span class="va">Date</span>, 
    initial  <span class="op">=</span> <span class="st">"18 months"</span>,
    assess   <span class="op">=</span> <span class="st">"3 months"</span>,
    skip     <span class="op">=</span> <span class="st">"3 months"</span>
  <span class="op">)</span>

<span class="va">walmart_tscv</span></pre></div>
<pre><code>## # Time Series Cross Validation Plan 
## # A tibble: 5 x 2
##   splits           id    
##   &lt;list&gt;           &lt;chr&gt; 
## 1 &lt;split [540/78]&gt; Slice1
## 2 &lt;split [540/78]&gt; Slice2
## 3 &lt;split [540/78]&gt; Slice3
## 4 &lt;split [540/78]&gt; Slice4
## 5 &lt;split [540/78]&gt; Slice5</code></pre>
<p>We can visualize the resample sets with <code><a href="../reference/timetk.html">plot_time_series_cv_plan()</a></code>. They look a little crazy because there are multiple time series groups. The important thing is to make sure the red and blue parts line up as expected in relation to our sampling strategy.</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="va">walmart_tscv</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/timetk.html">tk_time_series_cv_plan</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/timetk.html">plot_time_series_cv_plan</a></span><span class="op">(</span><span class="va">Date</span>, <span class="va">Weekly_Sales</span>, .facet_ncol <span class="op">=</span> <span class="fl">2</span>, .interactive <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></pre></div>
<p><img src="panel-data_files/figure-html/unnamed-chunk-11-1.png" width="95%" style="display: block; margin: auto;"></p>
<div id="apply-models-to-resamples" class="section level3">
<h3 class="hasAnchor">
<a href="#apply-models-to-resamples" class="anchor"></a>Apply Models to Resamples</h3>
<p>With <code>model_tbl</code> (models) and <code>walmart_tscv</code> (resamples) in had, we are ready to iteratively fit and predict each of the models on each of the resampling plan sets, producing resample predictions.</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">resample_results</span> <span class="op">&lt;-</span> <span class="va">model_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_fit_resamples.html">modeltime_fit_resamples</a></span><span class="op">(</span>
    resamples <span class="op">=</span> <span class="va">walmart_tscv</span>,
    control   <span class="op">=</span> <span class="fu">control_resamples</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="op">)</span></pre></div>
<p>A new column has been added to the <code>model_tbl</code> containing the resample predictions.</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="va">resample_results</span></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 3 x 4
##   .model_id .model     .model_desc               .resample_results
##       &lt;int&gt; &lt;list&gt;     &lt;chr&gt;                     &lt;list&gt;           
## 1         1 &lt;workflow&gt; PROPHET W/ REGRESSORS     &lt;tibble [5 × 5]&gt; 
## 2         2 &lt;workflow&gt; XGBOOST                   &lt;tibble [5 × 5]&gt; 
## 3         3 &lt;workflow&gt; PROPHET W/ XGBOOST ERRORS &lt;tibble [5 × 5]&gt;</code></pre>
</div>
<div id="evaluate-resample-accuracy" class="section level3">
<h3 class="hasAnchor">
<a href="#evaluate-resample-accuracy" class="anchor"></a>Evaluate Resample Accuracy</h3>
<p>Finally, we can evaluate the accuracy with <code><a href="../reference/modeltime_resample_accuracy.html">modeltime_resample_accuracy()</a></code>. We can see that Prophet Boost has the lowest average RMSE of the 6 resample sets.</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="va">resample_results</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_resample_accuracy.html">modeltime_resample_accuracy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/table_modeltime_accuracy.html">table_modeltime_accuracy</a></span><span class="op">(</span>.interactive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#fihyiyngcm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fihyiyngcm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fihyiyngcm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fihyiyngcm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fihyiyngcm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fihyiyngcm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fihyiyngcm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fihyiyngcm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fihyiyngcm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fihyiyngcm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fihyiyngcm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fihyiyngcm .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#fihyiyngcm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fihyiyngcm .gt_from_md > :first-child {
  margin-top: 0;
}

#fihyiyngcm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fihyiyngcm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fihyiyngcm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#fihyiyngcm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fihyiyngcm .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#fihyiyngcm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fihyiyngcm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fihyiyngcm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fihyiyngcm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fihyiyngcm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fihyiyngcm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#fihyiyngcm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fihyiyngcm .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#fihyiyngcm .gt_left {
  text-align: left;
}

#fihyiyngcm .gt_center {
  text-align: center;
}

#fihyiyngcm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fihyiyngcm .gt_font_normal {
  font-weight: normal;
}

#fihyiyngcm .gt_font_bold {
  font-weight: bold;
}

#fihyiyngcm .gt_font_italic {
  font-style: italic;
}

#fihyiyngcm .gt_super {
  font-size: 65%;
}

#fihyiyngcm .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="fihyiyngcm" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="table gt_table">
<thead class="gt_header">
<tr>
<th colspan="10" class="gt_heading gt_title gt_font_normal" style>Accuracy Table</th>
    </tr>
<tr>
<th colspan="10" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
</thead>
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">.model_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.model_desc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mae</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mase</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">smape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rmse</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rsq</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_center">1</td>
      <td class="gt_row gt_left">PROPHET W/ REGRESSORS</td>
      <td class="gt_row gt_left">Resamples</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_right">5781.13</td>
      <td class="gt_row gt_right">16.07</td>
      <td class="gt_row gt_right">0.17</td>
      <td class="gt_row gt_right">15.20</td>
      <td class="gt_row gt_right">8172.05</td>
      <td class="gt_row gt_right">0.95</td>
    </tr>
<tr>
<td class="gt_row gt_center">2</td>
      <td class="gt_row gt_left">XGBOOST</td>
      <td class="gt_row gt_left">Resamples</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_right">4709.81</td>
      <td class="gt_row gt_right">12.01</td>
      <td class="gt_row gt_right">0.14</td>
      <td class="gt_row gt_right">11.48</td>
      <td class="gt_row gt_right">6879.50</td>
      <td class="gt_row gt_right">0.97</td>
    </tr>
<tr>
<td class="gt_row gt_center">3</td>
      <td class="gt_row gt_left">PROPHET W/ XGBOOST ERRORS</td>
      <td class="gt_row gt_left">Resamples</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_right">4503.63</td>
      <td class="gt_row gt_right">13.24</td>
      <td class="gt_row gt_right">0.13</td>
      <td class="gt_row gt_right">11.72</td>
      <td class="gt_row gt_right">6609.03</td>
      <td class="gt_row gt_right">0.97</td>
    </tr>
</tbody>
</table></div>
<p>We can customize the accuracy results by supplying multiple summary functions in a list. I’ve supplied <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code> to get the range.</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="va">resample_results</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_resample_accuracy.html">modeltime_resample_accuracy</a></span><span class="op">(</span>
    summary_fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      min    <span class="op">=</span> <span class="va">min</span>,
      max    <span class="op">=</span> <span class="va">max</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/table_modeltime_accuracy.html">table_modeltime_accuracy</a></span><span class="op">(</span>.interactive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#oethyfqwls .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#oethyfqwls .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oethyfqwls .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#oethyfqwls .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#oethyfqwls .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oethyfqwls .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oethyfqwls .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#oethyfqwls .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#oethyfqwls .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#oethyfqwls .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#oethyfqwls .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#oethyfqwls .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#oethyfqwls .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#oethyfqwls .gt_from_md > :first-child {
  margin-top: 0;
}

#oethyfqwls .gt_from_md > :last-child {
  margin-bottom: 0;
}

#oethyfqwls .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#oethyfqwls .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#oethyfqwls .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oethyfqwls .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#oethyfqwls .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oethyfqwls .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#oethyfqwls .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#oethyfqwls .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oethyfqwls .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oethyfqwls .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#oethyfqwls .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oethyfqwls .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#oethyfqwls .gt_left {
  text-align: left;
}

#oethyfqwls .gt_center {
  text-align: center;
}

#oethyfqwls .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#oethyfqwls .gt_font_normal {
  font-weight: normal;
}

#oethyfqwls .gt_font_bold {
  font-weight: bold;
}

#oethyfqwls .gt_font_italic {
  font-style: italic;
}

#oethyfqwls .gt_super {
  font-size: 65%;
}

#oethyfqwls .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="oethyfqwls" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="table gt_table">
<thead class="gt_header">
<tr>
<th colspan="16" class="gt_heading gt_title gt_font_normal" style>Accuracy Table</th>
    </tr>
<tr>
<th colspan="16" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
</thead>
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">.model_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.model_desc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mae_min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mae_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mape_min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mape_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mase_min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mase_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">smape_min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">smape_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rmse_min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rmse_max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rsq_min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rsq_max</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_center">1</td>
      <td class="gt_row gt_left">PROPHET W/ REGRESSORS</td>
      <td class="gt_row gt_left">Resamples</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_right">5079.99</td>
      <td class="gt_row gt_right">6930.57</td>
      <td class="gt_row gt_right">12.04</td>
      <td class="gt_row gt_right">20.31</td>
      <td class="gt_row gt_right">0.15</td>
      <td class="gt_row gt_right">0.22</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">17.58</td>
      <td class="gt_row gt_right">7483.02</td>
      <td class="gt_row gt_right">9917.76</td>
      <td class="gt_row gt_right">0.92</td>
      <td class="gt_row gt_right">0.97</td>
    </tr>
<tr>
<td class="gt_row gt_center">2</td>
      <td class="gt_row gt_left">XGBOOST</td>
      <td class="gt_row gt_left">Resamples</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_right">3665.48</td>
      <td class="gt_row gt_right">5567.77</td>
      <td class="gt_row gt_right">7.99</td>
      <td class="gt_row gt_right">17.22</td>
      <td class="gt_row gt_right">0.11</td>
      <td class="gt_row gt_right">0.18</td>
      <td class="gt_row gt_right">7.90</td>
      <td class="gt_row gt_right">14.32</td>
      <td class="gt_row gt_right">5289.17</td>
      <td class="gt_row gt_right">8321.47</td>
      <td class="gt_row gt_right">0.95</td>
      <td class="gt_row gt_right">0.99</td>
    </tr>
<tr>
<td class="gt_row gt_center">3</td>
      <td class="gt_row gt_left">PROPHET W/ XGBOOST ERRORS</td>
      <td class="gt_row gt_left">Resamples</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_right">3837.74</td>
      <td class="gt_row gt_right">5087.11</td>
      <td class="gt_row gt_right">9.32</td>
      <td class="gt_row gt_right">16.78</td>
      <td class="gt_row gt_right">0.11</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">8.61</td>
      <td class="gt_row gt_right">13.70</td>
      <td class="gt_row gt_right">5591.65</td>
      <td class="gt_row gt_right">7443.07</td>
      <td class="gt_row gt_right">0.95</td>
      <td class="gt_row gt_right">0.98</td>
    </tr>
</tbody>
</table></div>
</div>
</div>
<div id="wrapup" class="section level1">
<h1 class="hasAnchor">
<a href="#wrapup" class="anchor"></a>Wrapup</h1>
<p>Working with Panel Data (data with multiple overlapping time series groups) can be challenging. Modeltime Resample makes it much easier to evaluate multiple models. We saw how we can easily evaluate multiple models on varying time series windows. This increased our confidence that the Prophet Boost model was the best model for this data.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matt Dancho.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
